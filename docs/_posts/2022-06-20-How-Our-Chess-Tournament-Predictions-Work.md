---
layout: post
title:  "How Our Chess Tournament Predictions Work"
date:   2022-06-20 15:00:00 -0700
categories: chess-simulations
---

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script> 

<style>
    .field td {padding: 3px 3px; }
    .field th {padding: 3px 3px; }
    .narrow {width: 50%; margin: auto;}
    .post-header{
        margin-bottom: 10px;
    }
    .post-title{
        margin-bottom: 10px;
    }
    .pad{
        padding: 5px;
    }
.postImage {
  display: block;
  text-align: center;
  margin-left: auto;
  margin-right: auto;
  font-size: 12px;
  max-height: 300px;
  padding-top: 0px;
}

.postImage img {
  height: auto;
  max-height: 300px;
}

.caption {
  display: block;
  text-align: center;
  margin-left: auto;
  margin-right: auto;
  font-size: 12px;
}
</style>

### The Details

Since the 2022 Grand Prix, I have been publishing predictions for chess tournaments with super grandmasters. I am interested in understanding who is likely to win, and what the probability is for each player. We can also answer other interesting questions, such as, "How likely is the Candidates Tournament to go to tiebreaks?" (22%!) So what goes into making these predictions? A few simple steps.

- Predicting the outcome of individual games
- Programming the tournament format
- Simulating the tournament 10,000+ times

### Predicting Individual Games

Every chess tournament is fundamentally the same - we take the results of many individual chess games and we calculate the total points scored for each player to determine the winner. So, the first step in predicting tournament outcomes is creating a good mechanism to predict individual games.

I built a machine learning model to predict the results of chess games given the Elo for the white player and the Elo for the black player. This works really well because the model captures important relationships like white having an advantage over black and that draws are more likely as Elo increases. Both of these relationships are critical to model correctly when predicting tournament outcomes. I wrote an article called [Elo Ratings v. Machine Learning][ml] earlier in the year, in case you'd like some more details. Below is an example of output from the model showing draw probability as Elo increases. You can see at the super GM level, the draw rate is about 55%.

<div>                            <div id="3a42a4c5-53f3-4663-aeec-9bdd69353569" class="plotly-graph-div" style="height:100%; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("3a42a4c5-53f3-4663-aeec-9bdd69353569")) {                    Plotly.newPlot(                        "3a42a4c5-53f3-4663-aeec-9bdd69353569",                        [{"hovertemplate":"Win %{y}%","legendgroup":"","line":{"color":"#ffb703","dash":"solid"},"marker":{"symbol":"circle"},"mode":"lines","name":"","orientation":"v","showlegend":false,"x":[2249,2250,2251,2252,2253,2254,2255,2256,2257,2258,2259,2260,2261,2262,2263,2264,2265,2266,2267,2268,2269,2270,2271,2272,2273,2274,2275,2276,2277,2278,2279,2280,2281,2282,2283,2284,2285,2286,2287,2288,2289,2290,2291,2292,2293,2294,2295,2296,2297,2298,2299,2300,2301,2302,2303,2304,2305,2306,2307,2308,2309,2310,2311,2312,2313,2314,2315,2316,2317,2318,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,2345,2346,2347,2348,2349,2350,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2384,2385,2386,2387,2388,2389,2390,2391,2392,2393,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2416,2417,2418,2419,2420,2421,2422,2423,2424,2425,2426,2427,2428,2429,2430,2431,2432,2433,2434,2435,2436,2437,2438,2439,2440,2441,2442,2443,2444,2445,2446,2447,2448,2449,2450,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2473,2474,2475,2476,2477,2478,2479,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,2550,2551,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,2563,2564,2565,2566,2567,2568,2569,2570,2571,2572,2573,2574,2575,2576,2577,2578,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592,2593,2594,2595,2596,2597,2598,2599,2600,2601,2602,2603,2604,2605,2606,2607,2608,2609,2610,2611,2612,2613,2614,2615,2616,2617,2618,2619,2620,2621,2622,2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2633,2634,2635,2636,2637,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2672,2673,2674,2675,2676,2677,2678,2679,2680,2681,2682,2683,2684,2685,2686,2687,2688,2689,2690,2691,2692,2693,2694,2695,2696,2697,2698,2699,2700,2701,2702,2703,2704,2705,2706,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2729,2730,2731,2732,2733,2734,2735,2736,2737,2738,2739,2740,2741,2742,2743,2744,2745,2746,2747,2748,2749,2750,2751,2752,2753,2754,2755,2756,2757,2758,2759,2760,2761,2762,2763,2764,2765,2766,2767,2768,2769,2770,2771,2772,2773,2774,2775,2776,2777,2778,2779,2780,2781,2782,2783,2784,2785,2786,2787,2788,2789,2790,2791,2792,2793,2794,2795,2796,2797,2798,2799],"xaxis":"x","y":[0.37228161287253103,0.3728126305509234,0.3731831943840694,0.3735421050206945,0.3739634848323338,0.37442867622533776,0.37495458548748273,0.37531103949591554,0.37565985108624256,0.3759958949988473,0.3763873800183242,0.3768382816595439,0.3772141837856825,0.3776040671753568,0.37796537204475783,0.37816702455366213,0.3783768478262338,0.37868705402093666,0.3790112414791751,0.3794266234222876,0.37982850689566083,0.38023563306008923,0.38072976670488273,0.38125433362386596,0.3818796155364627,0.38236329073734215,0.38290376804124265,0.3834655758817567,0.38405936095521404,0.38466728394110744,0.38520753765934346,0.3858045934806005,0.38644809185909024,0.38712356747052323,0.3877932338065985,0.388251047739798,0.3887901071110975,0.3894700523675473,0.3901603511752989,0.39086472415703205,0.3914208055975424,0.39204939919998016,0.39279512124958943,0.39355119685050055,0.39425708434112433,0.39483444378604143,0.39548724346549813,0.39653852234579934,0.39758980122610044,0.3986026013246508,0.3992222131842404,0.3998646073677086,0.4008498683177797,0.4018351292678508,0.4028063928177782,0.4033484460942102,0.4039132816945209,0.4048667003966614,0.4058201190988019,0.40684493570481617,0.4075213755453321,0.40821268776040825,0.40918559932881426,0.41012631819866946,0.4111196648553368,0.41183504950410826,0.41256530652744,0.41343768666808367,0.4142778741101765,0.4152058628362473,0.4156492494722406,0.41607624675467847,0.4165179952770009,0.41692755110077245,0.4174242974289175,0.4177769128585476,0.4181131389346222,0.41855769009774035,0.41897004856230763,0.41954329596772433,0.41982252346873605,0.42008536161619225,0.4204752547248733,0.42083295513500335,0.4212784281225606,0.42167813109789215,0.4220465723451078,0.42240995506006207,0.42277333777501647,0.4231757145702014,0.42357266052701004,0.42391525525701496,0.4243136827237322,0.4247121101904496,0.4251449309785667,0.42574131004604754,0.4263016551442147,0.4266670628133412,0.42703247048246773,0.4274163231847192,0.4280909322380149,0.42872950732199683,0.4293567816221133,0.4299840559222299,0.43057961169214687,0.43149742900886057,0.4323691243441694,0.4331153422058216,0.4338615600674739,0.4345994438183931,0.4355343996618336,0.43643584766016835,0.43724143486344846,0.43807921476527945,0.4389456086490135,0.4398605869589026,0.4407651469223737,0.4416983045751404,0.44266365492645804,0.443510399076104,0.4444446159802661,0.44541262073675186,0.4465524640719112,0.4477245001056215,0.4487752743891408,0.4497392499068367,0.45073701327685634,0.4517532407501142,0.45280166092192287,0.453707694525295,0.4547915120720032,0.4558827817193798,0.4568394194254069,0.4578282498299848,0.4587181460994222,0.45977266089413177,0.46079448235693904,0.46168272133332655,0.46257096030971406,0.4635327684700416,0.4645383179335013,0.46549353956958583,0.46629218853433657,0.4670908374990873,0.46807378161430563,0.46903902477893755,0.46991164455589374,0.47062195725905537,0.47133226996221694,0.4723143100268111,0.4730523499501875,0.4737478458904653,0.4743034905845606,0.474859135278656,0.475640347290937,0.4761815888338413,0.4765322426642199,0.47695695609167904,0.4773816695191382,0.47796352888435356,0.4783226546708255,0.47856513644956283,0.4790022260160864,0.47943931558260994,0.4798935848877736,0.48030467020723233,0.48062435124462266,0.4810038058953738,0.4813832605461249,0.48182185289881796,0.4822836950416401,0.48265179128998803,0.4829674590772369,0.48328312686448577,0.48356718904407275,0.4841758568780971,0.48464584899813745,0.48496366609967,0.4852814832012026,0.4855645273736302,0.48605605717186295,0.4867016715700831,0.4870629086876548,0.4874241458052265,0.48776688255447986,0.4884030673631432,0.48921228979853554,0.4897228534499491,0.49023341710136253,0.49056915845363896,0.4912645054767898,0.4920515071972831,0.49276825039835714,0.4934849935994312,0.49390704093415594,0.4946170692647434,0.4954133032934934,0.49618256218375484,0.49695182107401625,0.49732577649302445,0.49821878154289895,0.4991358639129709,0.49981062122408737,0.5004853785352038,0.5009431197323988,0.5018914640513726,0.5029388481258312,0.503601970981009,0.5042650938361869,0.5047186386933029,0.5056046082650647,0.506435031817069,0.5068813733300112,0.5073277148429532,0.5076821660876127,0.5083931918856395,0.5090463280491839,0.5093901764578943,0.5097340248666047,0.5100613654350664,0.5108184401589694,0.5113755001989976,0.5118627432085294,0.5123499862180612,0.512708673397379,0.5131735064804521,0.5135730415081741,0.5142407125928203,0.5149083836774667,0.5154764429934297,0.5161819737977302,0.5164135462164576,0.5172568376238162,0.5181001290311749,0.5187536776627965,0.5193628696516037,0.5194822337015673,0.5202332926353301,0.5209843515690928,0.5215308211111482,0.5222037957598702,0.52257756547702,0.5232381089571878,0.5238986524373557,0.5243387507630562,0.5248330466133219,0.5252318897717595,0.5257459108498008,0.526259931927842,0.5268593842570355,0.5274536509126058,0.5279145904025304,0.5284888957839752,0.5290632011654199,0.5296070925231946,0.5300893936720975,0.5306750729786717,0.5313969309545428,0.5321187889304139,0.5329033438299927,0.5336319460979994,0.5345843378375317,0.5354608101673491,0.5363372824971665,0.5373253195067678,0.5381680770978648,0.5391886385508581,0.5400388503372919,0.5408890621237257,0.5418619241794639,0.5425636566587024,0.5435747151910096,0.5442934570845669,0.5450121989781243,0.5460204237094447,0.5468718077966531,0.5479097671544284,0.5486108609910453,0.5493119548276624,0.5502653984997374,0.5509259555449227,0.5519153236285812,0.552426147629951,0.5529369716313208,0.5537085113830069,0.5542437516921047,0.5551597373733356,0.5558602549776657,0.5565607725819958,0.5575583780368604,0.5581769441188471,0.5591077394892424,0.55991431124728,0.5607208830053175,0.5617735019343377,0.56256353742666,0.5634914772696369,0.5643546680495032,0.5652178588293695,0.5657802698467919,0.566149836365332,0.5667072306817327,0.5673477875305475,0.5679883443793621,0.5683837731223692,0.5687929167536868,0.5692363521657794,0.5695900362387706,0.5699437203117617,0.5700296545791579,0.5702496822186418,0.5704367458846379,0.5704507778100812,0.5704648097355246,0.5701616731194504,0.5700144385366848,0.5698342399804313,0.5697286171917547,0.5696229944030782,0.5691505080784015,0.5688709326084401,0.5685583931649909,0.5684262741463506,0.5682941551277102,0.5680453165943172,0.5678268471939562,0.5676083777935951,0.5675059340894272,0.5674034903852592,0.5670484379939608,0.5667743642359067,0.5665002904778527,0.5666133116220997,0.5667263327663468,0.5667078040919308,0.5668468036048018,0.5669858031176727,0.5671105565805424,0.5672353100434122,0.5671748343454674,0.567291349704195,0.5674078650629228,0.567339618844205,0.5672713726254872,0.5671400261947673,0.5672529422206745,0.5673658582465816,0.5672286998874982,0.5671602450564979,0.5673140423368476,0.5678934560414798,0.5685658177622207,0.5684712549450615,0.5684453956559851,0.5687407023576353,0.5693646967972141,0.5700816392529016,0.5699382311989729,0.5698635266731272,0.5700220326097011,0.5703193587147654,0.5707096328359386,0.5704866724319683,0.5702083560777598,0.5701956561294029,0.5702787197112252,0.5707398649769501,0.5706138878395034,0.570301516548925,0.5702880015655712,0.5703190880918673,0.5707282563020659,0.5705819922012708,0.570135922963871,0.5697748507988009,0.5693926417164068,0.5694388255393478,0.568946521270704,0.5682175995571924,0.5676523990278896,0.5670265561876524,0.56683861016643,0.5662419962486753,0.5654087648860529,0.5646422139829012,0.563729910416586,0.5632838372776342,0.5627082533186175,0.5619380106070939,0.5612031356776597,0.560384078108562,0.5597461172990336,0.5592489271259238,0.5586881164032007,0.5580968771115372,0.5573291919490568,0.5567164939922786,0.5562778929771259,0.5557516753396672,0.5552218425791046,0.5543503329466133,0.5535751088779072,0.5532302448954908,0.5527112729442909,0.5520895816917395,0.5511171052395025,0.5503624720717151,0.5500351686888957,0.5495337573372927,0.5490082913507428,0.5483047711680868,0.5477531475562304,0.5475959028029482,0.5474707103451638,0.5473516783497651,0.5471618988903661,0.5467731279383912,0.5464811032108295,0.5463521689816591,0.5460646550953766,0.5457606464728375,0.5452837559115898,0.5445967089175754,0.5441861634054248,0.5438833768297064,0.5436795802317742,0.5430750848619678,0.5427051425336317,0.5425718176501634,0.5425726410695342,0.5428296658340158,0.5425454262785997,0.5421186128154618,0.5419140467361911,0.5418954279143787,0.5420856866963024,0.5418333244504688,0.5412345306416476,0.5408160255243326,0.5407039201938011,0.5406532347977381,0.5405108164372934,0.5398864282782254,0.5393112906077699,0.5392072928435958,0.5391662216394079,0.5390242568170779,0.5387187275356637,0.5384177412874723,0.5380656468801316,0.5377764790327769,0.5373521711930888,0.5368543809790474,0.5364476251447061,0.5361090609974596,0.5357205355117229,0.5350753123129883,0.5345922656400255,0.5342146234077636,0.5338883643845239,0.5334637946574398,0.5327591101358198,0.532393165150447,0.5320203565582233,0.5316148140122554,0.5311617526526358,0.5304943308940622,0.5303116781662436,0.5301221618315742,0.5300093127816116,0.5298489449179975,0.5294833773091895,0.5297772876514665,0.5300261677736884,0.5302367055542037,0.5303997245210673,0.5306014100647155,0.5309795629779199,0.5312893820163286,0.5314667696391703,0.5314820894464783,0.5316724750988037,0.5320511174913369,0.5323876683298876,0.5325925326656359,0.5326836785512049,0.5328229133813018,0.5331299116997461,0.5334249857257994,0.5335702055657707,0.5336524988457558,0.5337171266746873,0.5340176744649262,0.534344401607352,0.5344118733252445,0.5344164184831511,0.5342651000226117,0.5341289442339093,0.5340571344105985,0.5341960269758071,0.5342719929810296,0.5341257346575606,0.534101820601586,0.5341422525110029,0.534252021670923,0.5344117521693335,0.5343439207051638,0.5345742597390676,0.5349367013428399,0.5352977543312583,0.5357087686581667,0.535981584817683,0.5363597487105968,0.5369001824349706,0.5374392275439904,0.5379774421013073,0.5383774584912321,0.5389133709431254,0.5395734495819009,0.5402321396053222,0.5408899990770406,0.541547858548759,0.5423891753797834,0.5434045216522163,0.5442671503421646,0.5451289484804098,0.5459326997378423,0.546900388681972,0.5480421070675103,0.549148834976502,0.5502555628854937,0.5512989062797838,0.5523303611301923,0.5534299742369063,0.5544938519543094,0.5555577296717125,0.556558222874414,0.5576616154186027,0.5588029989575051,0.5599086471070966,0.5610142952566882,0.5618244236200916,0.5626821132808322,0.5635396902917084,0.5643615319132738,0.565183373534839,0.5658831637452357,0.5665829539556324,0.5672327682616383,0.5678468471783331,0.568460926095028],"yaxis":"y","type":"scatter"}],                        {"hovermode":"x unified","legend":{"title":{"text":"Name"},"tracegroupgap":0},"margin":{"t":60},"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"title":{"text":"Probability of Drawing for Evenly Matched Opponents | Pawnalyze.com"},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Elo Rating"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Draw Probability"}}},                        {"responsive": true}                    )                };                            </script>        </div>

### Programming The Tournament Format

Once we can predict individual games, the next step is to write code to collect information about the players (i.e., names and Elos), the tournament schedule, and the tiebreak procedures. This is a relatively straightforward task, though each tournament usually has a slightly unique format that requires coding. For example, the Grand Prix used a pool-play system and then moved to a knockout, whereas the Candidates Tournament is a double round robin. Each tournament also has different tiebreak procedures that must be considered in the code.

The code for the simulations is available on my GitHub, free for you to use and explore yourself! For example, here is the code to simulate the [Candidates Tournament][cand] in Python.

### Running A Lot Of Simulations

More code! In Python. On [my GitHub][git] for you to see.

Once we can simulate the results of a tournament we want to run that simulation over and over to get a sense for the probability of each outcome. I usually run 50,000 (or more) simulations, which is generally enough to have an accuracy within 0.1% (assuming the model for individual games is accurate). That model is not perfect, but it serves as a good approximation. 

For example, in round four of the 2022 Candidates Tournament when Ding Liren (white, 2799) faces off against Caruana (black, 2787), there is a 25.4% chance Ding Liren wins, a 57.1% chance of a draw, and a 17.5% chance Caruana wins, according to the model.

Back to the simulations! Once we have our 50,000 simulated tournaments, we can inspect the results for interesting things. Some topics I've been curious about for the 2022 Candidates Tournament:
- Most obviously, what is the probability of each player winning after each round?
- What is the average winning score?
- How often does the winner of the tournament lose any of their games with black?
- What are the chances the event goes to tiebreaks?

### All Models Are Wrong, Some Are Useful

No model attempting to predict the outcome of a future event is perfect. Anyone claiming otherwise is going to be selling you snake oil very soon! But, some models do a good job of capturing an approximation of the real world. As humans, we understand that Ding is more likely to win with white against Caruana than the other way around, and the model can help us approximate that difference.

As of round three, my predictions say that both Nepo and Caruana have a 25% chance to win the event. So if Firouzja wins, does that mean my model was wrong? No, as it stands today, I believe it's approximately true that they each have a 25% chance of winning, but that doesn't mean it will turn out that way - in fact, it also means there is a 75% chance that Caruana will not win the tournament!

So, I claim the model and my simulations are useful, but there are many ways I could improve them. If you have more suggestions to improve the simulations or model, please let me know on Twitter or Reddit.


#### Future improvements
- How drawish each player is individually (ehem, Drawdjabov!)
- Previous head-to-head results
- How good each player is with white and black
- Considering the tournament situation in individual game predictions (e.g., sometimes a player may need a win so they give up drawing chances for a small increase in winning chances)

Hopefully this helps you understand the simulations I publish, and please feel free to ask questions if you have them.



[ml]: https://pawnalyze.com/tournament/2022/02/27/Elo-Rating-Accuracy-Is-Machine-Learning-Better.html
[cand]: https://github.com/cmwetherell/cmwetherell.github.io/blob/main/chessSim/candidatesTorunament.py
[git]: https://github.com/cmwetherell/cmwetherell.github.io/blob/main/chessSim/