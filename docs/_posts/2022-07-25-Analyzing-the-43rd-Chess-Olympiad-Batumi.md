---
layout: post
title:  "Analyzing the 43rd Chess Olympiad"
subtitle: "Win probabilities by round"
date:   2022-07-28 00:01:00 -0700
postImage: /assets/img/batumi.jpeg 
imageCaption:  "photo: Alina L'Ami"
categories: chess-simulations
---

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script> 

<style>
    .field td {padding: 3px 3px; }
    .field th {padding: 3px 3px; }
    .narrow {width: 50%; margin: auto;}
    .post-header{
        margin-bottom: 10px;
    }
    .post-title{
        margin-bottom: 10px;
    }
    .pad{
        padding: 5px;
    }
.postImage {
  display: block;
  text-align: center;
  margin-left: auto;
  margin-right: auto;
  font-size: 12px;
  max-height: 400px;
  padding-top: 0px;
}

.postImage img {
  height: auto;
  max-height: 400px;
}

.caption {
  display: block;
  text-align: center;
  margin-left: auto;
  margin-right: auto;
  font-size: 12px;
}
</style>

### Who cares about the Chess Olympiad from 4 years ago?

I do! I'm planning to publish round-by-round win proababilities for the upcoming 44th Chess Olympiad in Chennai, and what better was to test my code than using the 43rd Olympiad as a test case? Some of you may be familiar with my [2022 Candidates Tournament][cand] predictions, and I will stick to that formula for the upcoming Olympiad.

This was my first time programming a Swiss tournament, and it required a bit of black magic to undertsand the [Olympiad Pairing Regulations][pairing]. Interestingly, I think there is a few ambiguous situations that the regulations do not cover. I made some assumptions that are probably not too material, but I wonder how to official pairing program handles these ambiguities, and if they could ever materailly impact the outomce of the Olympiad.

The tiebreak criteria have changed slightly for the upcoming 2022 Chess Olympiad, and instead of programming the old TB's I decided to simplify and make predictions based on the TB criteria for the upcoming tournament. So there will be some imprecision created by that, but based on a cursory view of my results I don't think it has much of an impact.

Without further ado... let's go back in time and make predictions as if we were at the end of each of the 11 rounds of the Olympiad.

### Round by Round Predictions for the 43rd Chess Olympiad

<div>                            <div id="9c4fb95b-5777-43e6-a638-ddb787dd856f" class="plotly-graph-div" style="height:100%; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("9c4fb95b-5777-43e6-a638-ddb787dd856f")) {                    Plotly.newPlot(                        "9c4fb95b-5777-43e6-a638-ddb787dd856f",                        [{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"China","marker":{"color":"rgb(27,158,119)","pattern":{"shape":""}},"name":"China","offsetgroup":"China","orientation":"v","showlegend":true,"textposition":"auto","x":["Pre","1","2","3","4","5","6","7","8","9","10","Final"],"xaxis":"x","y":[32.0,18.0,25.0,15.0,21.0,14.0,6.0,12.0,14.0,35.0,50.0,100.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"United States of America","marker":{"color":"rgb(217,95,2)","pattern":{"shape":""}},"name":"United States of America","offsetgroup":"United States of America","orientation":"v","showlegend":true,"textposition":"auto","x":["Pre","1","2","3","4","5","6","7","8","9","10"],"xaxis":"x","y":[22.0,26.0,19.0,31.0,36.0,34.0,31.0,48.0,67.0,30.0,45.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Russia","marker":{"color":"rgb(117,112,179)","pattern":{"shape":""}},"name":"Russia","offsetgroup":"Russia","orientation":"v","showlegend":true,"textposition":"auto","x":["Pre","1","2","3","4","5","6","7","8","9","10"],"xaxis":"x","y":[21.0,28.0,20.0,25.0,9.0,15.0,8.0,2.0,4.0,3.0,1.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"India","marker":{"color":"rgb(231,41,138)","pattern":{"shape":""}},"name":"India","offsetgroup":"India","orientation":"v","showlegend":true,"textposition":"auto","x":["Pre","1","2","3","4","5","6","7","8"],"xaxis":"x","y":[12.0,9.0,13.0,14.0,11.0,4.0,3.0,4.0,7.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Azerbaijan","marker":{"color":"rgb(102,166,30)","pattern":{"shape":""}},"name":"Azerbaijan","offsetgroup":"Azerbaijan","orientation":"v","showlegend":true,"textposition":"auto","x":["Pre","1","2","3","4","5","6","7","8"],"xaxis":"x","y":[9.0,6.0,16.0,8.0,10.0,28.0,45.0,23.0,3.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Ukraine","marker":{"color":"rgb(230,171,2)","pattern":{"shape":""}},"name":"Ukraine","offsetgroup":"Ukraine","orientation":"v","showlegend":true,"textposition":"auto","x":["Pre","1","2","3","4","6"],"xaxis":"x","y":[1.0,3.0,2.0,2.0,3.0,1.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"France","marker":{"color":"rgb(166,118,29)","pattern":{"shape":""}},"name":"France","offsetgroup":"France","orientation":"v","showlegend":true,"textposition":"auto","x":["Pre","1","4","6","7","10"],"xaxis":"x","y":[1.0,1.0,2.0,1.0,1.0,1.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Israel","marker":{"color":"rgb(102,102,102)","pattern":{"shape":""}},"name":"Israel","offsetgroup":"Israel","orientation":"v","showlegend":true,"textposition":"auto","x":["Pre","1","4","5"],"xaxis":"x","y":[1.0,3.0,3.0,1.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"England","marker":{"color":"rgb(27,158,119)","pattern":{"shape":""}},"name":"England","offsetgroup":"England","orientation":"v","showlegend":true,"textposition":"auto","x":["Pre","1","2","3","4","9"],"xaxis":"x","y":[1.0,2.0,2.0,3.0,1.0,4.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Armenia","marker":{"color":"rgb(217,95,2)","pattern":{"shape":""}},"name":"Armenia","offsetgroup":"Armenia","orientation":"v","showlegend":true,"textposition":"auto","x":["1","2","3","4","5","7","8","9"],"xaxis":"x","y":[3.0,1.0,1.0,1.0,1.0,3.0,2.0,5.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Peru","marker":{"color":"rgb(117,112,179)","pattern":{"shape":""}},"name":"Peru","offsetgroup":"Peru","orientation":"v","showlegend":true,"textposition":"auto","x":["1"],"xaxis":"x","y":[1.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Poland","marker":{"color":"rgb(231,41,138)","pattern":{"shape":""}},"name":"Poland","offsetgroup":"Poland","orientation":"v","showlegend":true,"textposition":"auto","x":["2","4","5","6","7","8","9","10"],"xaxis":"x","y":[2.0,1.0,2.0,4.0,6.0,3.0,22.0,3.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Georgia 1","marker":{"color":"rgb(102,166,30)","pattern":{"shape":""}},"name":"Georgia 1","offsetgroup":"Georgia 1","orientation":"v","showlegend":true,"textposition":"auto","x":["3","4"],"xaxis":"x","y":[1.0,1.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Germany","marker":{"color":"rgb(230,171,2)","pattern":{"shape":""}},"name":"Germany","offsetgroup":"Germany","orientation":"v","showlegend":true,"textposition":"auto","x":["4"],"xaxis":"x","y":[1.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Czech Republic","marker":{"color":"rgb(166,118,29)","pattern":{"shape":""}},"name":"Czech Republic","offsetgroup":"Czech Republic","orientation":"v","showlegend":true,"textposition":"auto","x":["5","7"],"xaxis":"x","y":[1.0,1.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Netherlands","marker":{"color":"rgb(102,102,102)","pattern":{"shape":""}},"name":"Netherlands","offsetgroup":"Netherlands","orientation":"v","showlegend":true,"textposition":"auto","x":["6"],"xaxis":"x","y":[1.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"Win %{y}%","legendgroup":"Croatia","marker":{"color":"rgb(27,158,119)","pattern":{"shape":""}},"name":"Croatia","offsetgroup":"Croatia","orientation":"v","showlegend":true,"textposition":"auto","x":["9"],"xaxis":"x","y":[1.0],"yaxis":"y","type":"bar"}],                        {"barmode":"relative","hovermode":"x unified","legend":{"title":{"text":"Name"},"tracegroupgap":0,"traceorder":"reversed"},"margin":{"t":60},"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"rgb(36,36,36)"},"error_y":{"color":"rgb(36,36,36)"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"baxis":{"endlinecolor":"rgb(36,36,36)","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"rgb(36,36,36)"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"histogram2d"}],"histogram":[{"marker":{"line":{"color":"white","width":0.6}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterpolar"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"rgb(237,237,237)"},"line":{"color":"white"}},"header":{"fill":{"color":"rgb(217,217,217)"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":1,"tickcolor":"rgb(36,36,36)","ticks":"outside"}},"colorscale":{"diverging":[[0.0,"rgb(103,0,31)"],[0.1,"rgb(178,24,43)"],[0.2,"rgb(214,96,77)"],[0.3,"rgb(244,165,130)"],[0.4,"rgb(253,219,199)"],[0.5,"rgb(247,247,247)"],[0.6,"rgb(209,229,240)"],[0.7,"rgb(146,197,222)"],[0.8,"rgb(67,147,195)"],[0.9,"rgb(33,102,172)"],[1.0,"rgb(5,48,97)"]],"sequential":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"sequentialminus":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]]},"colorway":["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"],"font":{"color":"rgb(36,36,36)"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","radialaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"zaxis":{"backgroundcolor":"white","gridcolor":"rgb(232,232,232)","gridwidth":2,"linecolor":"rgb(36,36,36)","showbackground":true,"showgrid":false,"showline":true,"ticks":"outside","zeroline":false,"zerolinecolor":"rgb(36,36,36)"}},"shapedefaults":{"fillcolor":"black","line":{"width":0},"opacity":0.3},"ternary":{"aaxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"baxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"},"bgcolor":"white","caxis":{"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside"}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"},"yaxis":{"automargin":true,"gridcolor":"rgb(232,232,232)","linecolor":"rgb(36,36,36)","showgrid":false,"showline":true,"ticks":"outside","title":{"standoff":15},"zeroline":false,"zerolinecolor":"rgb(36,36,36)"}}},"title":{"text":"Probability of Winning by Round | Pawnalyze.com"},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Round"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"range":[0,100],"title":{"text":"Win %"}}},                        {"responsive": true}                    )                };                            </script>        </div>


### Predicting China to win from the beginning

My predictions gave China a 32% chance to win the event before things started, despite that they were the third seed. The first thing to point out is that each round is only based on 100 simulations, so the predictions are certainly lacking credibility. I havent had the time to dig in and understand why my predictions liked China more than the USA despite the slightly lower average rating.

Stay tuned for predictions for the 44th Chess Olympiad starting Friday!

[ml]: https://pawnalyze.com/tournament/2022/02/27/Elo-Rating-Accuracy-Is-Machine-Learning-Better.html
[cand]: https://pawnalyze.com/tournaments/2022-candidates-tournament/
[git]: https://github.com/cmwetherell/cmwetherell.github.io/blob/main/chessSim/
[pairing]: https://handbook.fide.com/chapter/OlympiadPairingRules2022